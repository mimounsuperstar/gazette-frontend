{"ast":null,"code":"import axios from \"axios\";\nimport { link } from \"./api\";\nexport async function handleLogin(username, password) {\n  try {\n    await axios.post(link + \"login/\", {\n      'username': username,\n      'password': password\n    });\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nexport async function generateToken(username, password) {\n  try {\n    const response = await axios.post(link + \"token/\", {\n      'username': username,\n      'password': password\n    });\n    return response.data;\n  } catch (err) {\n    return err;\n  }\n}\nexport async function validUser() {\n  try {\n    const token = sessionStorage.getItem('req_token');\n    const response = await axios.get(link + \"user/check/\", {\n      headers: {\n        \"Authorization\": \"Token \" + token\n      }\n    });\n\n    if (response.data.detail == \"Invalid Token.\") {\n      return false;\n    } else {\n      return true;\n    }\n  } catch (err) {\n    return false;\n  }\n}","map":{"version":3,"names":["axios","link","handleLogin","username","password","post","e","generateToken","response","data","err","validUser","token","sessionStorage","getItem","get","headers","detail"],"sources":["/Users/mimoun./WebstormProjects/gazette-frontend/src/admin/api/handleLogin.js"],"sourcesContent":["import axios from \"axios\";\nimport {link} from \"./api\";\n\nexport async function handleLogin(username, password){\n    try{\n        await axios.post(link+\"login/\", {'username':username, 'password': password})\n        return true\n    } catch(e) {\n        return false\n    }\n}\n\nexport async function generateToken(username, password) {\n    try {\n        const response = await axios.post(link + \"token/\", {'username': username, 'password': password})\n        return response.data\n    } catch (err) {\n        return err;\n    }\n}\n\nexport async function validUser() {\n    try {\n        const token = sessionStorage.getItem('req_token')\n        const response = await axios.get(link + \"user/check/\", {headers: {\"Authorization\": \"Token \" + token}})\n        if (response.data.detail == \"Invalid Token.\") {\n            return false\n        } else {\n            return true\n        }\n    } catch (err) {\n        return false;\n    }\n}"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,IAAR,QAAmB,OAAnB;AAEA,OAAO,eAAeC,WAAf,CAA2BC,QAA3B,EAAqCC,QAArC,EAA8C;EACjD,IAAG;IACC,MAAMJ,KAAK,CAACK,IAAN,CAAWJ,IAAI,GAAC,QAAhB,EAA0B;MAAC,YAAWE,QAAZ;MAAsB,YAAYC;IAAlC,CAA1B,CAAN;IACA,OAAO,IAAP;EACH,CAHD,CAGE,OAAME,CAAN,EAAS;IACP,OAAO,KAAP;EACH;AACJ;AAED,OAAO,eAAeC,aAAf,CAA6BJ,QAA7B,EAAuCC,QAAvC,EAAiD;EACpD,IAAI;IACA,MAAMI,QAAQ,GAAG,MAAMR,KAAK,CAACK,IAAN,CAAWJ,IAAI,GAAG,QAAlB,EAA4B;MAAC,YAAYE,QAAb;MAAuB,YAAYC;IAAnC,CAA5B,CAAvB;IACA,OAAOI,QAAQ,CAACC,IAAhB;EACH,CAHD,CAGE,OAAOC,GAAP,EAAY;IACV,OAAOA,GAAP;EACH;AACJ;AAED,OAAO,eAAeC,SAAf,GAA2B;EAC9B,IAAI;IACA,MAAMC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,WAAvB,CAAd;IACA,MAAMN,QAAQ,GAAG,MAAMR,KAAK,CAACe,GAAN,CAAUd,IAAI,GAAG,aAAjB,EAAgC;MAACe,OAAO,EAAE;QAAC,iBAAiB,WAAWJ;MAA7B;IAAV,CAAhC,CAAvB;;IACA,IAAIJ,QAAQ,CAACC,IAAT,CAAcQ,MAAd,IAAwB,gBAA5B,EAA8C;MAC1C,OAAO,KAAP;IACH,CAFD,MAEO;MACH,OAAO,IAAP;IACH;EACJ,CARD,CAQE,OAAOP,GAAP,EAAY;IACV,OAAO,KAAP;EACH;AACJ"},"metadata":{},"sourceType":"module"}